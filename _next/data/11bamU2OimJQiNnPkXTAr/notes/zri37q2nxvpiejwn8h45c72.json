{"pageProps":{"note":{"id":"zri37q2nxvpiejwn8h45c72","title":"K3s Install","desc":"","updated":1708520437478,"created":1691236800000,"tags":["k8s","kubernetes"],"isDir":false,"custom":{"isDir":false},"fname":"k8s.k3s-install","type":"note","vault":{"fsPath":".","selfContained":true,"name":"dralagen-notes"},"contentHash":"20eb4500646080ec89bbed7e718f6746","links":[{"type":"frontmatterTag","from":{"fname":"k8s.k3s-install","id":"zri37q2nxvpiejwn8h45c72","vaultName":"dralagen-notes"},"value":"tags.k8s","alias":"k8s","xvault":false,"to":{"fname":"tags.k8s"}},{"type":"frontmatterTag","from":{"fname":"k8s.k3s-install","id":"zri37q2nxvpiejwn8h45c72","vaultName":"dralagen-notes"},"value":"tags.kubernetes","alias":"kubernetes","xvault":false,"to":{"fname":"tags.kubernetes"}}],"anchors":{"server":{"type":"header","text":"SERVER","value":"server","line":12,"column":0,"depth":2},"disable-traefik":{"type":"header","text":"Disable traefik","value":"disable-traefik","line":14,"column":0,"depth":1},"create-k3s-cluster":{"type":"header","text":"Create k3s cluster","value":"create-k3s-cluster","line":19,"column":0,"depth":1},"agent":{"type":"header","text":"AGENT","value":"agent","line":30,"column":0,"depth":2},"add-server-as-a-worker-node":{"type":"header","text":"Add server as a worker node","value":"add-server-as-a-worker-node","line":33,"column":0,"depth":1}},"children":[],"parent":"a6mmymc6mgttfr5c3gwdbnw","data":{}},"body":"<h1 id=\"k3s-install\">K3s Install<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#k3s-install\"></a></h1>\n<h2 id=\"server\">SERVER<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#server\"></a></h2>\n<h1 id=\"disable-traefik\">Disable traefik<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#disable-traefik\"></a></h1>\n<pre><code>export INSTALL_K3S_EXEC=\"server --disable=traefik --cluster-init\"\n</code></pre>\n<h1 id=\"create-k3s-cluster\">Create k3s cluster<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#create-k3s-cluster\"></a></h1>\n<pre><code>curl -sfL https://get.k3s.io | K3S_TOKEN=\"SECRET\" sh -s - server --cluster-init\n</code></pre>\n<p>Ajout d'un noeud serveur</p>\n<pre><code>curl -sfL https://get.k3s.io | K3S_TOKEN=SECRET sh -s - server \\\n    --server https://&#x3C;ip or hostname of server1>:6443 \n</code></pre>\n<h2 id=\"agent\">AGENT<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#agent\"></a></h2>\n<h1 id=\"add-server-as-a-worker-node\">Add server as a worker node<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#add-server-as-a-worker-node\"></a></h1>\n<p>Récupération du token  sur le serveur maitre:</p>\n<pre><code>sudo cat /var/lib/rancher/k3s/server/node-token\n</code></pre>\n<p>Sur le future node :</p>\n<pre><code>curl -sfL https://get.k3s.io | K3S_TOKEN=\"SECRET\" sh -s - agent --server https://IP_SERVER_MASTER:6443\n</code></pre>\n<hr>\n<p>Source:</p>\n<ul>\n<li><a href=\"https://docs.k3s.io/quick-start\">https://docs.k3s.io/quick-start</a></li>\n<li><a href=\"https://docs.k3s.io/datastore/ha-embedded\">https://docs.k3s.io/datastore/ha-embedded</a></li>\n</ul>\n<hr>\n<h2 id=\"tags\">Tags<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#tags\"></a></h2>\n<ol>\n<li><a title=\"Private\" href=\"https://wiki.dendron.so/notes/hfyvYGJZQiUwQaaxQO27q.html\" target=\"_blank\" class=\"private\">k8s (Private)</a></li>\n<li><a class=\"color-tag\" style=\"--tag-color: #adf802;\" href=\"/notes/1f79dka1zwhueveq59yftow\">kubernetes</a></li>\n</ol>","noteIndex":{"id":"2uesa0051warstdngf5cmf7","title":"Root","desc":"","updated":1708520416918,"created":1708520416918,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"dralagen-notes"},"contentHash":"ad3a31dc6a93c4d9535e2b8f94725636","links":[],"anchors":{"welcome-to-dendron":{"type":"header","text":"Welcome to Dendron","value":"welcome-to-dendron","line":7,"column":0,"depth":1},"lookup":{"type":"header","text":"Lookup","value":"lookup","line":11,"column":0,"depth":2}},"children":["gndlraosis645zje2i41qgg","uasfq498nz8epmkkcadaydg","8k4kvyxmr9yfzwj1c3gi0n4","briw6u3lj94w3sbp88e1bds","kjdtuaejfcwi418sjb1boio","p7bph8j8z1fz08a7gsle0fy","i6av2evofjx08s6va0975vs","a6mmymc6mgttfr5c3gwdbnw","fqpo0zybrld9avxzbdh5al3","b5womle6z9k5vjnqyolqc9x","45fg18sk0lx7b2aivpi3yen"],"parent":null,"data":{},"body":"# Welcome to Dendron\n\nThis is the root of your dendron vault. If you decide to publish your entire vault, this will be your landing page. You are free to customize any part of this page except the frontmatter on top.\n\n## Lookup\n\nThis section contains useful links to related resources.\n\n- [Getting Started Guide](https://link.dendron.so/6b25)\n- [Discord](https://link.dendron.so/6b23)\n- [Home Page](https://wiki.dendron.so/)\n- [Github](https://link.dendron.so/6b24)\n- [Developer Docs](https://docs.dendron.so/)"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"dralagen-notes"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dralagen's notes","description":"Personal Knowledge Space","author":"dralagen"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree","editRepository":"https://github.com/dralagen/notes"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://notes.dralagen.fr","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true}